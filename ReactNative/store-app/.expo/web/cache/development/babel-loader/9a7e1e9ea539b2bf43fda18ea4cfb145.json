{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useDispatch } from \"react-redux\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"../../components/Button\";\nimport Input from \"../../components/Input\";\nimport styles from \"./Login.style\";\nimport usePost from \"../../hooks/usePost\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Login = function Login(_ref) {\n  var navigation = _ref.navigation;\n  var dispatch = useDispatch();\n  var initialState = {\n    username: \"\",\n    password: \"\"\n  };\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    values = _useState2[0],\n    setValues = _useState2[1];\n  var _usePost = usePost(),\n    data = _usePost.data,\n    loading = _usePost.loading,\n    error = _usePost.error,\n    post = _usePost.post;\n  function handleLogin(values) {\n    post((process && process.env && process.env.API_AUTH_URL || undefined) + \"/login\", values);\n    setValues(initialState);\n  }\n  if (error) {\n    console.log(error);\n    Alert.alert(\"Store\", \"Error!\");\n  }\n  if (data.token) {\n    dispatch({\n      type: \"SET_USER\",\n      payload: {\n        data: data\n      }\n    });\n    navigation.navigate(\"ProductsPage\");\n  } else {\n    Alert.alert(\"something is wrong!\");\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.logo_container,\n      children: _jsx(Image, {\n        style: styles.logo,\n        source: require(\"../../assets/logo.png\")\n      })\n    }), _jsxs(View, {\n      style: styles.body_container,\n      children: [_jsx(Input, {\n        placeholder: \"username\",\n        value: values.username,\n        onType: function onType(e) {\n          return setValues(_objectSpread(_objectSpread({}, values), {}, {\n            username: e\n          }));\n        }\n      }), _jsx(Input, {\n        placeholder: \"password\",\n        value: values.password,\n        onType: function onType(e) {\n          return setValues(_objectSpread(_objectSpread({}, values), {}, {\n            password: e\n          }));\n        }\n      }), _jsx(Button, {\n        text: \"Login\",\n        onPress: function onPress() {\n          return handleLogin(values);\n        },\n        loading: loading\n      })]\n    })]\n  });\n};\nexport default Login;","map":{"version":3,"names":["useDispatch","React","useState","Button","Input","styles","usePost","Login","navigation","dispatch","initialState","username","password","values","setValues","data","loading","error","post","handleLogin","console","log","Alert","alert","token","type","payload","navigate","container","logo_container","logo","require","body_container","e"],"sources":["/home/utku/Desktop/patika/ReactNative/kodwork/src/pages/Login/Login.js"],"sourcesContent":["import { useDispatch } from \"react-redux\";\n\nimport React, { useState } from \"react\";\nimport { View, Image } from \"react-native\";\n\n// johnd m38rmF$\n\nimport Button from \"../../components/Button\";\nimport Input from \"../../components/Input\";\n\nimport styles from \"./Login.style\";\n\nimport usePost from \"../../hooks/usePost\";\nimport { Alert } from \"react-native-web\";\n\nconst Login = ({ navigation }) => {\n  const dispatch = useDispatch();\n\n  const initialState = { username: \"\", password: \"\" };\n\n  const [values, setValues] = useState({});\n\n  const { data, loading, error, post } = usePost();\n\n  function handleLogin(values) {\n    post(process.env.API_AUTH_URL + \"/login\", values);\n    setValues(initialState);\n  }\n\n  if (error) {\n    console.log(error);\n    Alert.alert(\"Store\", \"Error!\");\n  }\n\n  // temp user\n  // const user = \"Utku\";\n\n  if (data.token) {\n    dispatch({ type: \"SET_USER\", payload: { data } });\n    navigation.navigate(\"ProductsPage\");\n  } else {\n    Alert.alert(\"something is wrong!\");\n  }\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.logo_container}>\n        <Image style={styles.logo} source={require(\"../../assets/logo.png\")} />\n      </View>\n\n      <View style={styles.body_container}>\n        <Input\n          placeholder=\"username\"\n          value={values.username}\n          onType={(e) => setValues({ ...values, username: e })}\n        />\n        <Input\n          placeholder=\"password\"\n          value={values.password}\n          onType={(e) => setValues({ ...values, password: e })}\n        />\n        <Button\n          text=\"Login\"\n          onPress={() => handleLogin(values)}\n          loading={loading}\n        />\n      </View>\n    </View>\n  );\n};\n\nexport default Login;\n"],"mappings":";;;;AAAA,SAASA,WAAW,QAAQ,aAAa;AAEzC,OAAOC,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC;AAAA;AAKxC,OAAOC,MAAM;AACb,OAAOC,KAAK;AAEZ,OAAOC,MAAM;AAEb,OAAOC,OAAO;AAA4B;AAAA;AAAA;AAG1C,IAAMC,KAAK,GAAG,SAARA,KAAK,OAAuB;EAAA,IAAjBC,UAAU,QAAVA,UAAU;EACzB,IAAMC,QAAQ,GAAGT,WAAW,EAAE;EAE9B,IAAMU,YAAY,GAAG;IAAEC,QAAQ,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAG,CAAC;EAEnD,gBAA4BV,QAAQ,CAAC,CAAC,CAAC,CAAC;IAAA;IAAjCW,MAAM;IAAEC,SAAS;EAExB,eAAuCR,OAAO,EAAE;IAAxCS,IAAI,YAAJA,IAAI;IAAEC,OAAO,YAAPA,OAAO;IAAEC,KAAK,YAALA,KAAK;IAAEC,IAAI,YAAJA,IAAI;EAElC,SAASC,WAAW,CAACN,MAAM,EAAE;IAC3BK,IAAI,CAAC,oEAA2B,QAAQ,EAAEL,MAAM,CAAC;IACjDC,SAAS,CAACJ,YAAY,CAAC;EACzB;EAEA,IAAIO,KAAK,EAAE;IACTG,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC;IAClBK,KAAK,CAACC,KAAK,CAAC,OAAO,EAAE,QAAQ,CAAC;EAChC;EAKA,IAAIR,IAAI,CAACS,KAAK,EAAE;IACdf,QAAQ,CAAC;MAAEgB,IAAI,EAAE,UAAU;MAAEC,OAAO,EAAE;QAAEX,IAAI,EAAJA;MAAK;IAAE,CAAC,CAAC;IACjDP,UAAU,CAACmB,QAAQ,CAAC,cAAc,CAAC;EACrC,CAAC,MAAM;IACLL,KAAK,CAACC,KAAK,CAAC,qBAAqB,CAAC;EACpC;EAEA,OACE,MAAC,IAAI;IAAC,KAAK,EAAElB,MAAM,CAACuB,SAAU;IAAA,WAC5B,KAAC,IAAI;MAAC,KAAK,EAAEvB,MAAM,CAACwB,cAAe;MAAA,UACjC,KAAC,KAAK;QAAC,KAAK,EAAExB,MAAM,CAACyB,IAAK;QAAC,MAAM,EAAEC,OAAO;MAA0B;IAAG,EAClE,EAEP,MAAC,IAAI;MAAC,KAAK,EAAE1B,MAAM,CAAC2B,cAAe;MAAA,WACjC,KAAC,KAAK;QACJ,WAAW,EAAC,UAAU;QACtB,KAAK,EAAEnB,MAAM,CAACF,QAAS;QACvB,MAAM,EAAE,gBAACsB,CAAC;UAAA,OAAKnB,SAAS,iCAAMD,MAAM;YAAEF,QAAQ,EAAEsB;UAAC,GAAG;QAAA;MAAC,EACrD,EACF,KAAC,KAAK;QACJ,WAAW,EAAC,UAAU;QACtB,KAAK,EAAEpB,MAAM,CAACD,QAAS;QACvB,MAAM,EAAE,gBAACqB,CAAC;UAAA,OAAKnB,SAAS,iCAAMD,MAAM;YAAED,QAAQ,EAAEqB;UAAC,GAAG;QAAA;MAAC,EACrD,EACF,KAAC,MAAM;QACL,IAAI,EAAC,OAAO;QACZ,OAAO,EAAE;UAAA,OAAMd,WAAW,CAACN,MAAM,CAAC;QAAA,CAAC;QACnC,OAAO,EAAEG;MAAQ,EACjB;IAAA,EACG;EAAA,EACF;AAEX,CAAC;AAED,eAAeT,KAAK"},"metadata":{},"sourceType":"module"}